<html>
  <head>
    <title>Kadena Transfer Tool</title>
    <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pact-lang-api@4.1.2/pact-lang-api-global.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./xchain.js"></script>
  </head>

  <body>
    <div class="ui main container">
      <a href="/"><img src="./kadena-logo.png" class="center" style="height:70px"></a>


      <h1>Finish Cross Chain Transfer</h1>
      <form id="kadena-form" class="ui form">
        <div class="field">
          <label>Chainweb Server</label>
          <div id="server-field" class="ui right labeled input">
            <input
              type="text"
              id="server"
              placeholder="Enter Your Node Server"
            />
            <label class="ui label" id="networkId"></label>
          </div>
        </div>
        <div class="field">
          <label>Request Key</label>
          <input type="text" id="pact-id" placeholder="Enter Request Key" />
        </div>
        <div id="pact-message" class="ui compact message hidden">
          <div class="header" id="pact-header"></div>
          <ul id="pact-info">
            <p>Source Chain: <span id="source-chain-id" /></p>
            <p>Target Chain: <span id="target-chain-id" /></p>
            <p>Sender: <span id="sender" /></p>
            <p>Receiver: <span id="receiver" /></p>
            <p>Receiver Guard: <span id="rg" /></p>
            <p>Amount: <span id="amount" /></p>
          </ul>
        </div>

        <div id="gas-payer-form" class="ui form">
          <div class="field">
            <label
              >Gas payer account (only single pubkey accounts are
              supported)</label
            >
            <input
              type="text"
              id="gas-payer"
              placeholder="kadena-xchain-gas"
              value="kadena-xchain-gas"
            />
            <!-- <button id="verify-gas-payer" class="ui primary button">Verify</button> -->
          </div>

          <div class="field">
            <label>Gas price</label>
            <input
              type="text"
              id="gas-price"
              placeholder="0.00000001"
              value="0.00000001"
            />
          </div>

          <div class="field">
            <label>Gas limit</label>
            <input type="text" id="gas-limit" placeholder="750" value="750" />
          </div>

          <div id="sig-data-message" class="ui compact message hidden">
            <h3 class="header">SigData</h3>
            <span>Copy the output into a SigBuilder (e.g. Chainweaver)</span>
            <textarea
              name="SigData"
              id="sig-data"
              cols="30"
              rows="10"
              value=""
              disabled="disabled"
            ></textarea>
            <div class="field"></div>
            <button id="click-to-copy" class="ui secondary basic button">
              Click To Copy
            </button>
          </div>

          <div id="signed-transaction-wrapper" class="ui field hidden">
            <label class="">Signed Transaction (JSON)</label>
            <div>Paste the signed transaction below</div>
            <textarea
              name="SigData"
              id="signed-transaction"
              cols="30"
              rows="10"
            >
            </textarea>
          </div>
        </div>

        <div id="submit-block">
          <button id="submit-button" class="ui primary button" disabled>
            Finish Cross Chain Transfer
          </button>
        </div>

        <div id="acct-err" class="ui center error message hidden"></div>

        <div id="result-message" class="ui compact message hidden"></div>
      </form>

      <div id="status-box" class="ui compact message result hidden">
        <div id="reqkey-box">
          <div class="header">Request Key</div>
          <p id="request-key" />
        </div>

        <br />
        <div>
          <div class="header" id="status-message"></div>
          <p id="status-error">
            <button id="listen-button" class="ui button" disabled>
              Listen Again
            </button>
          </p>
        </div>
      </div>
    </div>
  </body>
  <style>
    .dropdown {
      margin-bottom: 10px;
    }

    .hidden {
      display: none;
    }

    .container {
      text-align: center;
      margin-top: 20px;
    }

    .result {
      margin-top: 0px;
    }

    .check-button {
      margin-top: 15px;
    }

    #gas-payer-form input[type='text'] {
      width: 300px;
    }

    .ui #server-field {
      margin-top: 5px;
      width: 300px !important;
    }

    .ui #pact-id {
      margin-top: 5px;
      width: 300px;
    }

    .ui #target-chain-id {
      margin-top: 0px;
      width: 300px;
    }

    .ui #source-chain-id {
      margin-top: 0px;
      width: 300px;
    }

    .ui #account {
      margin-top: 5px;
      width: 300px;
    }

    .ui #submit-block {
      margin-top: 5px;
    }

    .ui #proof-block {
      margin-top: 5px;
    }

    #proof-message {
      width: 800px;
      overflow-wrap: break-word;
    }

    #pact-info p {
      font-weight: bold;
    }

    #pact-info {
      padding: 0 !important;
    }

    #pact-info span {
      font-weight: normal;
    }

    #listen-button {
      margin-top: 10px;
    }

    .td-underline {
      text-decoration: underline;
    }

    .td-no {
      text-decoration: none;
    }
    textarea {
      max-width: 700px;
    }
    body > div {
      padding: 40px 40px;
    }
  </style>
</html>
